<meta charset="utf-8" />
<style>
.class_input {
	border: 1px solid #ccc;
	border-radius: 4px;
	height: 25px;
}

.left_td {
	background: #f5f5f5;
	text-align: left;
	width: 15%
}
</style>
<div>
	<form class="form-horizontal" role="form" data-bind="visible:$parent.editFlag">
		<div style="text-align: left;">
			<h4 style="font-weight: bold;">条件分支线</h4>
		</div>
		<table class="table table-bordered table-hover">
			<tbody>
				<tr>
					<td class="left_td"><label>连线名</label></td>
					<td>
						<input type="hidden" name="conditionInfo" id="conditionInfo"  />
						<span hidden="hidden" id="conditionClick" data-bind="click: $parent.formulaHandler.bind($data,$('#conditionInfo').val())"></span>
						<span hidden="hidden" id="conditionClick2" data-bind="click: function(){setIndex($('#conditionInfo').val())}"></span>
						<input type="text" class="form-control" name="name"	data-bind="textInput: name" onkeydown="return false">
					</td>
				</tr>

				<tr>
					<td colspan=2>
						<table class="table table-bordered table-hover">
							<tbody>
								<tr>
									<td class="left_td"><label>下一节点</label></td>
									<td class="left_td"><label>连线信息</label></td>
									<td class="left_td"><label>条件公式</label></td>
								</tr>
								<!-- ko foreach: {data:lineData,as:'oper'} -->

								<tr>
									<td class="left_td" data-bind="text:endNodeName"></td>

									<td class="left_td"><input type="text"
										class="class_input" id="name" data-bind="value:name">
									</td>

									<td>
										<input type="hidden" class="form-control" id="condition" data-bind="value:condition">
										<input type="text" class="class_input" id="disCondition" data-bind="value:disCondition" style="width: 300px">

										<div>
											<div style="float: left">
												<input type="button" value="公式定义器"
													data-bind="click: function(){$('#conditionInfo').val($index());$('#formulaModal').modal();$('#conditionClick').click();$('#conditionClick2').click()}">
											</div>
											<div style="float: right; padding-right: 30px">
												<a href="javascript:void(0)"
													data-bind="click: function(){$parent.upOperation(this)}">[[#{moveUp}]]</a>
												<a href="javascript:void(0)"
													data-bind="click: function(){$parent.downOperation(this)}">[[#{moveDown}]]</a>
											</div>
										</div>
									</td>
								</tr>
								<!-- /ko -->
							</tbody>
						</table>
					</td>
				</tr>


				<tr>
					<td class="left_td"><label>节点帮助</label></td>
					<td colspan=""><span>在流程流转过程中，若定义的条件计算出错，或计算满足条件的结果不是唯一的时候，流程将通知起草人、当前处理和特权人进行错误处理，此时必须由特权人对流程进行干预，才能继续往下走</span>
					</td>
				</tr>
			</tbody>
		</table>
	</form>

	<!-- ko if: !$parent.editFlag  -->
	<form class="form-horizontal" role="form" data-bind="visible:!$parent.editFlag">
		<div style="text-align: left;">
			<h4 style="font-weight: bold;">条件分支线</h4>
		</div>
		<table class="table table-bordered table-hover">
			<tbody>
				<tr>
					<td class="left_td"><label>连线名</label></td>
					<td><input type="text" class="form-control" name="name"
						data-bind="textInput: name" disabled="disabled"></td>

				</tr>
				<tr>
					<td colspan=2>
						<table class="table table-bordered table-hover">
							<tbody>
								<tr>
									<td class="left_td"><label>下一节点</label></td>
									<td class="left_td"><label>连线信息</label></td>
									<td class="left_td"><label>条件公式</label></td>
								</tr>
								<!-- ko foreach: {data:lineData,as:'oper'} -->

								<tr>
									<td class="left_td" data-bind="text:endNodeName"></td>

									<td class="left_td">
										<input type="text" class="class_input" id="name" 
											data-bind="value:name" disabled="disabled">
									</td>

									<td>
										<input type="text" class="class_input" id="disCondition" 
											data-bind="value:disCondition"	style="width: 300px" disabled="disabled">
									</td>
								</tr>
								<!-- /ko -->
							</tbody>
						</table>
					</td>
				</tr>
				<tr>
					<td class="left_td"><label>节点帮助</label></td>
					<td colspan=""><span>在流程流转过程中，若定义的条件计算出错，或计算满足条件的结果不是唯一的时候，流程将通知起草人、当前处理和特权人进行错误处理，此时必须由特权人对流程进行干预，才能继续往下走</span>
					</td>
				</tr>
			</tbody>
		</table>
	</form>
	 <!-- /ko -->
</div>