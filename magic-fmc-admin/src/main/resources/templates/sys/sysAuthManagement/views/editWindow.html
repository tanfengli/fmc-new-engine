<meta charset="utf-8" />   
<style>
  td {
    text-align: center
  } 
</style>  

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"> 
   	<form class="form-horizontal" role="form" data-bind="with: formItem">
     	<div class="modal-dialog" role="document">
	        <div class="modal-content">
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	                <h4 class="modal-title" id="myModalLabel">流程授权维护</h4>
	            </div>
	            <div class="modal-body">
	                <input type="hidden" data-bind="textInput:fdId" class="form-control">   
	                <table id="tbUser" class="table table-striped table-bordered table-hover"> 
                        <tbody> 
                            <tr>
                                <td width="20%">
                                    <label for="varUseType">授权类型</label>  
                                </td>
                                <td width="40%">
                                    <input id="fdAuthorizeTypeOne" name="fdAuthorizeType" type="radio" value="0" data-bind="checked: fdAuthorizeType,click: function(){$('#judgeShow').show();return true;}" /> 授权处理  &nbsp;&nbsp;
                                    <input id="fdAuthorizeTypeTwo" name="fdAuthorizeType" type="radio" value="1" data-bind="checked: fdAuthorizeType,click: function(){$('#judgeShow').hide();return true;}" /> 授权阅读     
                                </td>
                                <td>
                                    <label for="fdAuthorizer">授权人</label>  
                                 </td>
                                <td>
                                	<div class="col-xs-6">
                                   <input type="hidden" data-bind="textInput:fdAuthorizer" class="form-control">   
                                   <input type="text" data-bind="textInput:fdAuthorizerName" class="form-control"/>
                                   </div>
                                   <div class="col-xs-2">
	                                   <button type="button" class="btn btn-default" 
	                                        data-bind="click:function(){clickPerson('fdAuthorizer')}">
											<i class="fa fa-hand-rock-o" aria-hidden="true"></i>选择
									   </button> 
									</div>
                                </td> 
                             </tr>
                             <tr> 
                                <td>
                                    <label>授权项</label>  
                               </td>
                                <td colspan="3"> 
                                    <div data-bind="foreach:{data:fdAuthorizeContext,as:'auth'}"> 
	                                    <input type="checkbox" data-bind="value:auth.fdId,checked:$parent.fdAuthorizedChe" />
	                                    <span data-bind="text:auth.fdName"></span>
                                    </div> 
                                </td>  
                             </tr>
                             <tr>
                                <td>
                                    <label for="fdAuthorizedPerson">被授权人</label>  
                                </td>
                                <td colspan="3">
                                	<div class="col-xs-6">
                                    <input type="hidden" data-bind="textInput:fdAuthorizedPerson" class="form-control"> 
                                    <input type="text" data-bind="textInput:fdAuthorizerPersonName" class="form-control"></div>
                                    <div class="col-xs-2">
                                    <button type="button" class="btn btn-default" data-bind="click:function(){clickPerson('fdAuthorizedPerson')}">
										<i class="fa fa-hand-rock-o" aria-hidden="true"></i>选择
									</button></div>
                                </td>
                             </tr>
                             <tr>
                                <td>
                                   <label for="fdAuthorizedCateText">授权范围</label>  
                                </td>
                                <td colspan="3">
                                   <input type="hidden" data-bind="textInput:fdAuthorizedCateTextId" class="form-control">  
                                   <textarea data-bind="textInput:fdAuthorizedCateText" style="height:100px;width:480px;"></textarea> 
                                   <button type="button" class="btn btn-default" data-bind="click:$parents[1].selectTemplate">
									  <i class="fa fa-hand-rock-o" aria-hidden="true"></i>选择
								   </button><span>(为空则所有流程都进行授权)</span>
                                </td>
                             </tr>
                             <tr id="judgeShow">
                                <td>
                                    <label for="varStatus">授权时间</label>  
                                </td>
                                <td colspan="3" style="text-align:left;">   
								    <input type="text" class="form_datetime" id="datetimepicker_start" data-bind="textInput:fdStartTime">
									&nbsp; 至  &nbsp; 
								    <input type="text" class="form_datetime" id="datetimepicker_end" data-bind="textInput:fdEndTime">
									<input type="checkbox" value="1" data-bind="checked:fdExpireDeletedChe" />
									<span>授权到期后自动删除此文档</span>
                                </td> 
                             </tr>
                        </tbody>
                    </table>   
	            </div>
	            <p>注意：授权不支持多级授权。举例，张三授权给李四，同个时间段李四授权给王五，这时需要张三审批的流程是不能转交给王五审批，还是李四审批</p>
	            <div class="modal-footer">
	                <button type="submit" id="btn_submit" data-bind="click:$parent.saveOrUpdateList" class="btn btn-primary">[[#{save}]]</button>
	                <button type="button" class="btn btn-default" data-dismiss="modal">[[#{close}]]</button>
	            </div>
	        </div>
		</div> 
   	</form>
</div>